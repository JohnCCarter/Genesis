# TradingBot Backend Environment Variables

# Applikationskonfiguration
HOST=0.0.0.0
PORT=8000
DEBUG=true
CORE_MODE=false

# CORS
ALLOWED_ORIGINS=["http://localhost:3000", "http://localhost:8080"]

# Bitfinex REST API - för orderläggning och kontohantering
BITFINEX_API_KEY=your_bitfinex_rest_api_key_here
BITFINEX_API_SECRET=your_bitfinex_rest_secret_key_here
BITFINEX_API_URL=https://api.bitfinex.com/v2
# Publik bas-URL för REST (Bitfinex rekommenderar api-pub för public endpoints)
BITFINEX_PUBLIC_API_URL=https://api-pub.bitfinex.com/v2

# Bitfinex WebSocket API - för realtidsdata och autentiserade feeds
BITFINEX_WS_API_KEY=your_bitfinex_websocket_api_key_here
BITFINEX_WS_API_SECRET=your_bitfinex_websocket_secret_key_here
BITFINEX_WS_URI=wss://api.bitfinex.com/ws/2

# JWT Autentisering
JWT_SECRET_KEY=your_jwt_secret_key_here
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# Backend-auth (REST/WS)
# AUTH_REQUIRED styr om backend kräver JWT för REST och Socket.IO.
# - True: Produktion/säker drift (rekommenderat)
# - False: Utvecklingsläge, stäng av JWT-krav för enklare test
# OBS! Lämna True i produktion. Aktivera/ändra detta senare vid behov.
AUTH_REQUIRED=True

# Loggning
LOG_LEVEL=INFO
LOG_FILE=tradingbot.log

# Notifieringar (valfritt)
# Telegram-bot för kritiska notifieringar
# TELEGRAM_BOT_TOKEN=xxx
# TELEGRAM_CHAT_ID=123456789

# Rate-limit (valfritt)
# RATE_LIMIT_WINDOW_SECONDS=60
# RATE_LIMIT_MAX_REQUESTS=120

# Databas (för framtida användning)
DATABASE_URL=sqlite:///./tradingbot.db

# Trading konfiguration
DEFAULT_TRADING_PAIR=BTCUSD
MAX_POSITION_SIZE=0.01
RISK_PERCENTAGE=2.0 

# Risk & handelsregler
TIMEZONE=UTC
TRADING_RULES_FILE=config/trading_rules.json
MAX_TRADES_PER_DAY=10
MAX_TRADES_PER_SYMBOL_PER_DAY=3
TRADE_COOLDOWN_SECONDS=60
TRADING_PAUSED=False

# Metrics-säkerhet (valfritt – sätt ETT eller fler)
# METRICS_ACCESS_TOKEN=supersecrettoken
# METRICS_BASIC_AUTH_USER=metrics
# METRICS_BASIC_AUTH_PASS=changeme
# METRICS_IP_ALLOWLIST=127.0.0.1,10.0.0.5

WS_SUBSCRIBE_SYMBOLS=tBTCUSD,tETHUSD,tSOLUSD,tLTCUSD,tADAUSD,tFILUSD
# Exempel: lägg till fler par kommaseparerat, t.ex.
# WS_SUBSCRIBE_SYMBOLS=tBTCUSD,tETHUSD,tSOLUSD,tLTCUSD,tADAUSD,tFILUSD,tDOTUSD,tXRPUSD

# tTESTALGO:TESTUSD  -> tALGUSD (ej listad just nu)
# tTESTAVAX:TESTUSD  -> tAVAXUSD (ej listad just nu)
# tTESTDOGE:TESTUSD  -> tDOGEUSD (ej listad just nu)
# tTESTNEAR:TESTUSD  -> tNEARUSD (ej listad just nu)
# tTESTXAUT:TESTUSD  -> tXAUTUSD (ej listad just nu)
# tTESTEOS:TESTUSD   -> tEOSUSD (tillfälligt ute i senaste körningen)

# --- Probability Model (feature flags) ---
# Aktivera sannolikhetsmodellen (false = använd heuristik)
PROB_MODEL_ENABLED=false
# Modellfil per symbol/timeframe (exempel)
# PROB_MODEL_FILE=./models/tBTCUSD_1m.json
# Minimikrav för confidence (0..1) och EV‑tröskel (i procent eller decimal ROI)
PROB_MODEL_CONFIDENCE_MIN=0.15
PROB_MODEL_EV_THRESHOLD=0.0005
# Beslutshorisont i candles
PROB_MODEL_TIME_HORIZON=20

# --- Probability Validation (rolling metrics) ---
# Aktivera schemalagd validering (Brier/LogLoss)
PROB_VALIDATE_ENABLED=true
# Intervall i minuter mellan valideringar
PROB_VALIDATE_INTERVAL_MINUTES=120
# Symboler att validera (komma-separerade). Lämna tomt för att använda WS_SUBSCRIBE_SYMBOLS.
# PROB_VALIDATE_SYMBOLS=tBTCUSD,tETHUSD
# Timeframe att använda vid validering
PROB_VALIDATE_TIMEFRAME=1m
# Antal candles att hämta för validering (håll lågt i dev för snabb start)
PROB_VALIDATE_LIMIT=50
# Max antal senaste samples per körning (håll lågt i dev)
PROB_VALIDATE_MAX_SAMPLES=50
# Rullande fönster (minuter) för aggregerad exponering i /metrics
PROB_VALIDATE_WINDOWS_MINUTES=60,360,1440
# Max datapunkter per fönster i processminne
PROB_VALIDATE_HISTORY_MAX_POINTS=1000

# --- Probability Retraining ---
# Aktivera schemalagd retraining (exporterar JSON-modeller i config/models)
PROB_RETRAIN_ENABLED=false
# Intervall i timmar mellan retraining-körningar
PROB_RETRAIN_INTERVAL_HOURS=24
# Symboler att träna om (komma-separerade). Lämna tomt för WS_SUBSCRIBE_SYMBOLS.
# PROB_RETRAIN_SYMBOLS=tBTCUSD
# Timeframe att använda vid retraining
PROB_RETRAIN_TIMEFRAME=1m
# Antal candles att hämta för retraining
PROB_RETRAIN_LIMIT=5000
# Katalog för exporterade modellfiler
PROB_RETRAIN_OUTPUT_DIR=config/models